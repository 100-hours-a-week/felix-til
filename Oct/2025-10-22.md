## ğŸ“† 2025-10-22

### ğŸ”” ìŠ¤í¬ëŸ¼

```
ì˜¤ëŠ˜ í•  ì¼
âœ”ï¸Â ìˆ˜ì—… ë‚´ìš© ë³µìŠµí•˜ê¸°
âœ”ï¸Â ì´ë ¥ì„œ ì‘ì„± ì‹œì‘í•´ë³´ê¸°
âœ”ï¸Â 6ì£¼ì°¨ ê³¼ì œ
- ì»¤ë®¤ë‹ˆí‹° ê³µí†µ ë ˆì´ì•„ì›ƒ êµ¬ì„± ì‹œì‘í•´ë³´ê¸°, express ì„œë²„êµ¬ì¶•

ì–´ì œ í•œ ì¼
âœ”ï¸Â [ì˜¤ëŠ˜ ë‚˜ê°ˆ ìˆ˜ì—…ë‚´ìš© ë³µìŠµ]
- í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
âœ”ï¸Â [ì´ê²ƒì´ ìŠ¤í”„ë§ë¶€íŠ¸ë‹¤ ì •ë…]
- chatper 4. RESTFul API ì‘ì„±í•˜ê¸° í…ŒìŠ¤íŠ¸ ì „ê¹Œì§€ ì™„ë£Œ(50%)
âœ”ï¸Â [ì½”ë”©í…ŒìŠ¤íŠ¸ ì—°ìŠµ]
- ë°±ì¤€ ë‹¨ê³„ë³„ë¡œ í’€ì–´ë³´ê¸° 4ë‹¨ê³„ ì™„ë£Œ
```

### ğŸš€ Today I Learned
#### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ í•„ìš”ì„±
```
ë§ì€ ì‹œê°„ì´ ë“¤ì–´ê°€ê³  ì•ˆì •ì„± ê²€ì¦ì´ ì–´ë µê¸°ì—
í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ê°€ì„±ë¹„ ìˆê²Œ ì‘ì„±í•´ì•¼í•œë‹¤.
```
<img src="../images/251022/image.png" height="250" border="1" /></br></br>

#### ìŠ¤í”„ë§ì—ì„œì˜ ì˜ˆì™¸ì²˜ë¦¬
```
1. BasicErrorController (ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬)
ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬
ë³„ë„ ì„¤ì • ì—†ì´ë„ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ ì‘ë™
```
```
2. @ResponseStatus
HTTP ìƒíƒœ ì½”ë“œë¥¼ ê°„ë‹¨íˆ ë³€ê²½í•  ë•Œ ì‚¬ìš©
ì •ì ìœ¼ë¡œ ìƒíƒœ ì½”ë“œê°€ ê³ ì •ë˜ë©°, ë™ì ìœ¼ë¡œ ì—ëŸ¬ ì •ë³´ë¥¼ ì „ë‹¬í•˜ê¸° ì–´ë ¤ì›€

@ResponseStatus(HttpStatus.NOT_FOUND)
public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String message) {
        super(message);
    }
}
```
```
3. ResponseStatusException

ìŠ¤í”„ë§ 5ì—ì„œ ì¶”ê°€ëœ ë°©ì‹ìœ¼ë¡œ, ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§ì ‘ ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆìŒ

@GetMapping("/user/{id}")
public User getUser(@PathVariable Long id) {
    return userRepository.findById(id)
        .orElseThrow(() -> new ResponseStatusException(
            HttpStatus.NOT_FOUND, 
            "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
        ));
}
```
```
4. @ExceptionHandler
ë©”ì„œë“œ ë ˆë²¨ì—ì„œ íŠ¹ì • ì˜ˆì™¸ë¥¼ ì²˜ë¦¬, ê°€ì¥ ìœ ì—°í•œ ë°©ì‹ì´ì§€ë§Œ, ê° ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ì¤‘ë³µ ì½”ë“œê°€ ë°œìƒê°€ëŠ¥í•¨

@RestController
public class UserController {
    
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    }
    
    @ExceptionHandler(UserNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleUserNotFound(UserNotFoundException ex) {
        ErrorResponse error = new ErrorResponse("USER_NOT_FOUND", ex.getMessage());
        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(error);
    }
}
```
</br>

```
5. @RestControllerAdvice (ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬)
ì „ì—­ì ìœ¼ë¡œ @ExceptionHandlerë¥¼ ì ìš©í•˜ì—¬ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ˆì™¸ë¥¼ í•œ ê³³ì—ì„œ ì²˜ë¦¬

Step 1: ErrorCode ì¸í„°í˜ì´ìŠ¤ ì •ì˜
javapublic interface ErrorCode {
    String getCode();
    String getMessage();
    HttpStatus getHttpStatus();
}
```
```
Step 2: ê³µí†µ ì—ëŸ¬ ì½”ë“œì™€ ë„ë©”ì¸ë³„ ì—ëŸ¬ ì½”ë“œ

java@Getter
@RequiredArgsConstructor
public enum CommonErrorCode implements ErrorCode {
    INVALID_PARAMETER("COMMON_001", "ì˜ëª»ëœ íŒŒë¼ë¯¸í„°ì…ë‹ˆë‹¤.", HttpStatus.BAD_REQUEST),
    INTERNAL_SERVER_ERROR("COMMON_002", "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", HttpStatus.INTERNAL_SERVER_ERROR),
    RESOURCE_NOT_FOUND("COMMON_003", "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", HttpStatus.NOT_FOUND);
    
    private final String code;
    private final String message;
    private final HttpStatus httpStatus;
}

@Getter
@RequiredArgsConstructor
public enum UserErrorCode implements ErrorCode {
    USER_NOT_FOUND("USER_001", "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", HttpStatus.NOT_FOUND),
    DUPLICATE_EMAIL("USER_002", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.", HttpStatus.CONFLICT),
    INVALID_PASSWORD("USER_003", "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.", HttpStatus.UNAUTHORIZED);
    
    private final String code;
    private final String message;
    private final HttpStatus httpStatus;
}
```
```
Step 3: ì»¤ìŠ¤í…€ ì˜ˆì™¸ í´ë˜ìŠ¤

java@Getter
public class RestApiException extends RuntimeException {
    private final ErrorCode errorCode;
    
    public RestApiException(ErrorCode errorCode) {
        super(errorCode.getMessage());
        this.errorCode = errorCode;
    }
    
    public RestApiException(ErrorCode errorCode, String message) {
        super(message);
        this.errorCode = errorCode;
    }
}
```
```
Step 4: ì—ëŸ¬ ì‘ë‹µ í´ë˜ìŠ¤

java@Getter
@Builder
public class ErrorResponse {
    private String code;
    private String message;
    private LocalDateTime timestamp;
    
    public static ErrorResponse of(ErrorCode errorCode) {
        return ErrorResponse.builder()
            .code(errorCode.getCode())
            .message(errorCode.getMessage())
            .timestamp(LocalDateTime.now())
            .build();
    }
    
    public static ErrorResponse of(ErrorCode errorCode, String message) {
        return ErrorResponse.builder()
            .code(errorCode.getCode())
            .message(message)
            .timestamp(LocalDateTime.now())
            .build();
    }
}
```
```
Step 5: RestControllerAdvice êµ¬í˜„

java@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {
    
    // ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì²˜ë¦¬
    @ExceptionHandler(RestApiException.class)
    public ResponseEntity<ErrorResponse> handleRestApiException(RestApiException e) {
        log.error("RestApiException: {}", e.getMessage(), e);
        ErrorCode errorCode = e.getErrorCode();
        ErrorResponse errorResponse = ErrorResponse.of(errorCode, e.getMessage());
        return ResponseEntity
            .status(errorCode.getHttpStatus())
            .body(errorResponse);
    }
    
    // Validation ì˜ˆì™¸ ì²˜ë¦¬
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ErrorResponse> handleValidationException(MethodArgumentNotValidException e) {
        log.error("Validation error: {}", e.getMessage());
        String message = e.getBindingResult().getAllErrors().get(0).getDefaultMessage();
        ErrorResponse errorResponse = ErrorResponse.of(CommonErrorCode.INVALID_PARAMETER, message);
        return ResponseEntity
            .status(HttpStatus.BAD_REQUEST)
            .body(errorResponse);
    }
    
    // ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ErrorResponse> handleException(Exception e) {
        log.error("Unexpected error: {}", e.getMessage(), e);
        ErrorResponse errorResponse = ErrorResponse.of(CommonErrorCode.INTERNAL_SERVER_ERROR);
        return ResponseEntity
            .status(HttpStatus.INTERNAL_SERVER_ERROR)
            .body(errorResponse);
    }
}

```

### ğŸ”¥ ì˜¤ëŠ˜ì˜ ë„ì „ ê³¼ì œì™€ í•´ê²° ë°©ë²•
<!--
- ì˜¤ëŠ˜ì˜ í•™ìŠµ ê²½í—˜ì— ëŒ€í•œ ììœ ë¡œìš´ ìƒê°ì´ë‚˜ ëŠë‚€ ì ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
- ì„±ê³µì ì¸ ì , ê°œì„ í•´ì•¼ í•  ì , ìƒˆë¡­ê²Œ ì‹œë„í•˜ê³  ì‹¶ì€ ë°©ë²• ë“±ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.-->
```
ê° ë°©ë²•ì˜ ì„ íƒ ê¸°ì¤€:

BasicErrorController: ê¸°ë³¸ ë™ì‘, ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ í•„ìš” ì—†ì„ ë•Œ
@ResponseStatus: ê°„ë‹¨í•œ ì˜ˆì™¸ì˜ HTTP ìƒíƒœë§Œ ë³€ê²½í•  ë•Œ
ResponseStatusException: ë¹ ë¥´ê²Œ ì˜ˆì™¸ë¥¼ ë˜ì ¸ì•¼ í•  ë•Œ
@ExceptionHandler: íŠ¹ì • ì»¨íŠ¸ë¡¤ëŸ¬ì—ë§Œ ì ìš©í•  ì˜ˆì™¸ ì²˜ë¦¬
â–¶ï¸ @RestControllerAdvice: ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ (ì‹¤ë¬´ ê¶Œì¥)

ì‹¤ë¬´ì—ì„œëŠ” @RestControllerAdvice + ì»¤ìŠ¤í…€ ì˜ˆì™¸ + ErrorCode ì¡°í•©ì´
ë§ì´ ì‚¬ìš©ë˜ë©° ì¼ê´€ëœ ì—ëŸ¬ ì‘ë‹µí˜•ì‹ê³¼ ìœ ì§€ë³´ìˆ˜ì„± ì œê³µ

```
### ğŸ—¨ï¸ ì˜¤ëŠ˜ì˜ íšŒê³ 
```
ì¥ì‹œê°„ ê³µë¶€ì†ì—ì„œë„ íš¨ìœ¨ì ì¸ í•™ìŠµ ì²´ë“í•˜ê¸°
```